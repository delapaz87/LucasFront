
<div class="header">
  <div class="d-flex align-items-center h-100">
    <h2 class="ms-2">Comercio</h2>
  </div>
</div>
<div class="body-content--detail" *ngIf="!isLoading">
  <form ngActive  [formGroup]="formCompany" (ngSubmit)="saveComerce()" >
    <div class="row justify-content-center">
      <div class="col-md-3">
          <div class="file size" (click)="uploadLogo()" *ngIf="company?.logo == null || company?.logo == ''" >
            <label for="fileupload">Adjuntar imagen del Logo</label>
          </div>
          <div class="text-center" (click)="uploadLogo()" *ngIf="company?.logo != null && company?.logo != ''" >
            <div class="col-md-12 justify-content-center">
              <img [src]="company.logo" class="imgfile"/>
            </div>
            <span class="g-span--five link" (click)="uploadLogo()">Cambiar logo de Comercio</span>
          </div>
    </div>
    </div>
    <div class="row">
      <div class="col-md-12 mt-2">
        <div class="g-input--material mb-3">
            <label for="material-input">
                <input type="text" matInput name="name" formControlName="name" (blur)="updateCommerce()" autocomplete="something-new" >
                <span class="placeholder">Nombre comercial (*)</span>
            </label>
            <mat-error class="g-span-error" *ngIf="formCompany.get('name')?.hasError('required') && formCompany.get('name')?.touched">Rellene el campo requerido</mat-error>
        </div>
      </div>
    </div>
    <div class="row">
        <div class="col-md-6">
          <div class="f-selec">
            <span>Tipo de documento (*)</span>
              <select name="legal_document" formControlName="legal_document">
                <option *ngFor="let item of typedocuments" [value]="item?.value">{{item?.value}}</option>
              </select>
          </div>
          <mat-error class="g-span-error" *ngIf="formCompany.get('legal_document')?.hasError('required')">Seleccione el tipo de documento</mat-error>
        </div>
        <div class="col-md-6 mt-2">
          <div class="g-input--material mb-3">
            <label for="material-input">
                <input type="text" matInput name="legal_number" formControlName="legal_number" autocomplete="something-new" >
                <span class="placeholder">Número documento (*)</span>
            </label>
            <mat-error class="g-span-error" *ngIf="formCompany.get('legal_number')?.hasError('required') && formCompany.get('legal_number')?.touched">Rellene el campo requerido</mat-error>
          </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 mt-2">
          <div class="g-input--material mb-3">
              <label for="material-input">
                  <input type="text" matInput name="legal_name" formControlName="legal_name" autocomplete="something-new">
                  <span class="placeholder">Razón social (*)</span>
              </label>
              <mat-error class="g-span-error" *ngIf="formCompany.get('legal_name')?.hasError('required') && formCompany.get('legal_name')?.touched">Rellene el campo requerido</mat-error>
          </div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-md-12">
            <div class="mt-3">
              <div class="form-floating">
                <textarea name="rate_outcity_text"
                          class="form-control"
                          placeholder="Descripción"
                          style="height: 100px"
                          formControlName="description"
                          id="rate_outcity_text" (blur)="updateCommerce()"></textarea>
                <label for="rate_outcity_text">Descripción</label>
              </div>
            </div>
        </div>
    </div>
<!--     <div class="row">
      <div class="col-md-12 mt-2">
        <div class="g-input--material mb-3">
            <label for="material-input">
                <input type="text" matInput name="website" formControlName="website" (blur)="updateCommerce()" autocomplete="something-new">
                <span class="placeholder">Dirección Facebook</span>
            </label>
        </div>
      </div>
    </div> -->
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex align-items-center justify-content-between h-fz--12 my-3">
                <div class="">
                    <span class="g-span--five"><b>Formas de pago que usarás para cobrar</b></span>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <div class="d-flex justify-content-center align-items-center" (click)="showDigPagos()" style="cursor: pointer;">
                        <p class="m-0 g-span--tertiary">Configurar</p>
                        <i class="icon-add icon--primary ms-2"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12" *ngIf="company?.payment_accepted != undefined ">
          <div class="align-items-center justify-content-between h-fz--12">
              <div class="justify-content-center align-items-center">
                <p class="m-0 ps-2 g-span--primary"><span *ngFor="let item of payment_accept | filterPayment:payment" style="margin: 3px;"> {{item.name}}, </span></p>
              </div>
          </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 d-flex align-items-center justify-content-between h-fz--12 my-3">
            <p class="m-0 g-span--five"><b>Etiquetas para tu comercio</b></p>
            <div class="d-flex justify-content-center align-items-center" (click)="showDigEtiquetas()" style="cursor: pointer;">
                <p class="m-0 g-span--tertiary">Configurar</p>
                <i class="icon-add icon--primary ms-2"></i>
            </div>
        </div>
        <div class="col-md-12" *ngIf="this.tag_company != undefined ">
          <div class="align-items-center justify-content-between h-fz--12">
              <div class="justify-content-center align-items-center">
                <p class="m-0 ps-2 g-span--primary"><span *ngFor="let item of tag | filterTag:tag_company" style="margin: 3px;"> {{item?.title}}, </span></p>
              </div>
          </div>
      </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex align-items-center justify-content-between h-fz--12 my-3">
                <div class="">
                    <span class="g-span--five"><b>Configurar tienda virtual</b></span>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <div class="d-flex justify-content-center align-items-center" (click)="showDigConfigStore()" style="cursor: pointer;">
                        <p class="m-0 g-span--tertiary">Configurar</p>
                        <i class="icon-add icon--primary ms-2"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="d-flex align-items-center justify-content-between h-fz--12">
              <div class="d-flex justify-content-center align-items-center" *ngIf="company?.web_template != null" >
                  <p class="m-0 ps-2 g-span--primary" *ngIf="company?.web_template > 0">Plantilla:
                    <b *ngIf="company?.web_template == 1"> Visual</b>
                    <b *ngIf="company?.web_template == 2"> Compacta</b>
                    <b *ngIf="company?.web_template == 3"> Textual</b>
                    <b *ngIf="company?.web_template == 4"> Ecommerce</b></p>
                    <p class="m-0 ps-2 g-span--primary" *ngIf="company?.web_url != null">Tienda virtual: <a href="https://{{company?.web_url}}.tulivery.com/" target="_black"> https://{{company?.web_url}}.tulivery.com/</a></p>
              </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex align-items-center justify-content-between h-fz--12 my-3">
                <div class="">
                    <span class="g-span--five"><b>Configurar delivery</b></span>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <div class="d-flex justify-content-center align-items-center" (click)="showDigDelivery()" style="cursor: pointer;">
                        <p class="m-0 g-span--tertiary">Configurar</p>
                        <i class="icon-add icon--primary ms-2"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="d-flex align-items-center justify-content-between h-fz--12" *ngIf="tarifadelivery?.delivery_way > 0">
                <div class="d-flex justify-content-center align-items-center">
                    <p class="m-0 ps-2 g-span--primary" *ngIf="tarifadelivery?.delivery_way === 1" >Delivery</p>
                    <p class="m-0 ps-2 g-span--primary" *ngIf="tarifadelivery?.delivery_way === 2" >Recojo</p>
                    <p class="m-0 ps-2 g-span--primary" *ngIf="tarifadelivery?.delivery_way === 3" >Delivery y recojo</p>
                    <p class="m-0 ps-2 g-span--primary" *ngIf="tarifadelivery?.delivery_min > 0 ">Valor mínimo {{tarifadelivery?.delivery_min | currency:'S/.'}}</p>
                    <p class="m-0 ps-2 g-span--primary" *ngIf="tarifadelivery?.delivery_map == 0">Distancia fija en KM</p>
                    <p class="m-0 ps-2 g-span--primary" *ngIf="tarifadelivery?.delivery_map == 1">Cobertura con mapa</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex align-items-center justify-content-between h-fz--12 my-3">
                <div class="">
                    <span class="g-span--five"><b>Tarifa delivery</b></span>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <div class="d-flex justify-content-center align-items-center" (click)="showDigDeliveryRate()" style="cursor: pointer;">
                        <p class="m-0 g-span--tertiary">Configurar</p>
                        <i class="icon-add icon--primary ms-2"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="d-flex align-items-center justify-content-between h-fz--12 mb-2" *ngIf="tarifadelivery?.rate_type == 1">
                <div class="d-flex justify-content-center align-items-center">
                    <p class="m-0 ps-2 g-span--primary">Tarifa fija de: {{tarifadelivery.rate_fix | currency:'S/.' }} soles</p>
                </div>
            </div>
            <div class="d-flex align-items-center justify-content-between h-fz--12 mb-2" *ngIf="tarifadelivery?.rate_type == 2">
              <div class="d-flex justify-content-center align-items-center">
                  <p class="m-0 ps-2 g-span--primary">Tarifa por distancia es {{tarifadelivery.rate_fix | currency:'S/.' }} por {{tarifadelivery.rate_var_km}} Km</p>
              </div>
           </div>
           <div class="d-flex align-items-center justify-content-between h-fz--12 mb-2" *ngIf="tarifadelivery?.rate_type == 3">
            <div class="d-flex justify-content-center align-items-center">
                <p class="m-0 ps-2 g-span--primary">Tarifa por valor de compra es {{tarifadelivery.rate_fix | currency:'S/.' }} por compra minima de {{ tarifadelivery.delivery_min | currency:'S/.' }}</p>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between h-fz--12 mb-2" *ngIf="tarifadelivery?.rate_type == 4">
            <div class="d-flex justify-content-center align-items-center">
                <p class="m-0 ps-2 g-span--primary">Tarifa precio {{tarifadelivery.rate_fix | currency:'S/.' }} luego distancia</p>
            </div>
          </div>
        </div>
    </div>
    <div class="row">
      <div class="col-md-6 mt-2">
        <div class="g-input--material mb-3">
          <label for="material-input">
              <input type="text" matInput name="sac_email" formControlName="sac_email" (blur)="updateCommerce()" autocomplete="something-new">
              <span class="placeholder">Correo atención al cliente</span>
          </label>
        </div>
      </div>
      <div class="col-md-6 mt-2">
        <div class="g-input--material mb-3">
          <label for="material-input">
              <input type="text" matInput name="sac_phone" formControlName="sac_phone" (blur)="updateCommerce()" autocomplete="something-new">
              <span class="placeholder">Teléfono atención al cliente</span>
          </label>
        </div>
    </div>
    </div>
    <div class="body-content--footer">
        <div class="row m-0">
            <div class="col-md-6">
                <button type="reset" class="w-100 g-button g-button--line-2">Cancelar</button>
            </div>
            <div class="col-md-6">
                <button type="submit" class="w-100 g-button"
                  [class.g-button--primary]="formCompany.valid"
                  [class.g-button--secundary]="formCompany.invalid"
                  [disabled]="formCompany.invalid">
                  Guardar
                </button>
            </div>
        </div>
    </div>
  </form>
</div>
<div class="body-content--detail" *ngIf="isLoading">
    <div class="row">
      <div class="col-md-12 mt-2">
        <div class="g-input--material mb-3">
            <label for="material-input">
              <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
            </label>
        </div>
      </div>
    </div>
    <div class="row">
        <div class="col-md-6">
          <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
        </div>
        <div class="col-md-6 mt-2">
          <div class="g-input--material mb-3">
            <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
          </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 mt-2">
          <div class="g-input--material mb-3">
            <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
          </div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-md-9">
            <div class="mt-3">
              <div class="form-floating">
                <ngx-skeleton-loader animation="pulse" count="5"></ngx-skeleton-loader>
              </div>
            </div>
        </div>
        <div class="col-md-3">
          <ngx-skeleton-loader animation="pulse" appearance="circle" [theme]="{
            height: '150px',
            width: '100%'
          }"></ngx-skeleton-loader>
        </div>
    </div>
    <div class="row">
      <div class="col-md-12 mt-2">
        <div class="g-input--material mb-3">
          <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
        </div>
      </div>
    </div>
    <div class="row">
        <div class="col-md-12">
          <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
        </div>
        <div class="col-md-12">
          <ngx-skeleton-loader animation="pulse" count="2"></ngx-skeleton-loader>
        </div>
    </div>
    <div class="body-content--footer">
        <div class="row m-0">
            <div class="col-md-6">
              <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
            </div>
            <div class="col-md-6">
              <ngx-skeleton-loader animation="pulse"></ngx-skeleton-loader>
            </div>
        </div>
    </div>
</div>

